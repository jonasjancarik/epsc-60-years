<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><!-- Bootstrap CSS -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
	<!-- <script data-main="scripts/main" src="scripts/require.js"> -->
	<title>EPSC - #FutureOfEurope #60words60years</title>
	<script type="application/json">
	{
		"utility": "piwik",
		"siteID": 283,
		"sitePath": ["ec.europa.eu\/assets\/epsc"],
		"instance": "ec.europa.eu"
	}
	</script><!-- Social Share Kit CSS -->
	<link href="css/social-share-kit.css" rel="stylesheet" type="text/css">
</head>
<body class="testimonials-landing">
	<div class="container mt-3">
		<div class="row text-center">
			<div class="col">
				<a href="https://ec.europa.eu/epsc" style="color: #fff; text-decoration: none; color: #fff;"><img alt=
					"European Commission logo" id="banner-flag" src=
					"https://ec.europa.eu/epsc/sites/epsc/themes/epsc_template/logo.png" style="z-index: 100;"></a>
				</div><!-- /.col -->
			</div><!-- /.row -->
			<!-- /.row -->
		</div>
		<div class="container-fluid" style="background-color: #0065a2; height: 69px; margin-top: -33px; padding-top: 38px; z-index: -10;">
			<div class="row">
				<div class="col text-center">
					<a href="https://ec.europa.eu/epsc" style="color: #fff; text-decoration: none; color: #fff;">European Political
						Strategy Centre</a>
					</div><!-- /.col -->
				</div><!-- /.row -->
			</div><!-- /.container-fluid -->
			<!-- <div class="container-fluid" style=" height: 52px; background-color: #0065a2; margin-top: -33px; z-index: -100;"> -->
			<!-- <div class="container mt-3">
			<img alt="European Commission logo" id="banner-flag" src=
			"https://ec.europa.eu/epsc/sites/epsc/themes/epsc_template/logo.png"> <span class="hidden-sm hidden-xs" id=
			"banner-image-right"></span>
			<div id="main-title" style=
			"color: #0065a2; text-transform: uppercase; font-size: 24px !important; position: absolute; z-index: 10; left: 244px; top: 54px; text-decoration: none;">
			EPSC
		</div>
		<div class="hidden-xs" id="sub-title" style=
		"color: #fff; font-size: 17px !important; position: absolute; z-index: 10; left: 245px; top: 90px; text-decoration: none;">
		<a href="https://ec.europa.eu/epsc" style="color: #fff;">European Political Strategy Centre</a>
	</div>
</div>
<div class="container-fluid" style=" height: 52px; background-color: #0065a2; margin-top: -33px; z-index: -100;"> -->
<!-- /.container -->
<nav class="navbar sticky-top navbar-toggleable-md navbar-light" style="background-color: #e6e6e6;">
	<button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class=
	"navbar-toggler navbar-toggler-right" data-target="#navbarSupportedContent" data-toggle="collapse" type=
	"button"><span class="navbar-toggler-icon"></span></button> <a class="navbar-brand translate" href=
	"index.html"><strong>{{hashtagMain}}</strong><br class="hidden-md-up"> #60words60years</a> <!-- <span class="volume-control navbar-text">
		<span class="volume-control-label">Enable sound</span>
		<span class="fa fa-volume-off"></span>
	</span> -->
	<div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
		<ul class="navbar-nav">
			<li class="nav-item">
				<a class="nav-link translate" href="#your-voices">{{yourVoices}}</a>
			</li>
			<li class="nav-item">
				<a class="nav-link translate" href="form.html">{{addYourVoice}}</a>
			</li>
			<li class="nav-item">
				<a class="nav-link translate" href="#about">{{aboutThisProject}}</a>
			</li>
			<li style="list-style: none; display: inline; display: none;">
				<div class="dropdown" id="language-picker">
					<button aria-expanded="false" aria-haspopup="true" class="btn btn-link dropdown-toggle" data-toggle="dropdown"
					id="language-picker-label" type="button">Language</button>
					<div aria-labelledby="language-picker-label" class="dropdown-menu dropdown-menu-right"></div>
				</div>
			</li>
		</ul>
	</div>
</nav>
<div class="container-fluid section-splash">
	<div class="row align-items-center">
		<div class="col section-splash-content text-center">
			<!-- <h1 style="display: inline;">{{hashtagMain}}</h1><br> -->
			<!-- this is a hack to make background-clip: text work in Edge -->
			<img alt="Hashtag Future Of Europe" src="assets/img/hashtag-futureofeurope.jpg" style=
			"width: 80%; max-width: 1340px"> <a class="cta-link" href="form.html"></a> <!-- preload CTA hover bg image -->
			<img src="assets/img/add-your-voice-hover.jpg" style="display:none;">
			<!-- <img src="assets/img/hashtag-futureofeurope.jpg" alt="">
			<img src="assets/img/add-your-voice.jpg" alt=""> -->
		</div>
	</div>
</div>
<div class="container section-share">
	<div class="row">
		<div class="col text-center">
			<strong>Share this:</strong>
			<div class="ssk-group">
				<a class="ssk ssk-facebook" href=""></a>
				<a class="ssk ssk-twitter" href="https://twitter.com/intent/tweet"></a>
				<a class="ssk ssk-linkedin" href=""></a>
				<a class="ssk ssk-pinterest" href=""></a>
				<a class="ssk ssk-google-plus" href=""></a> <!-- <a href="" class="ssk ssk-pinterest"></a> -->
				<a class="ssk ssk-tumblr" href=""></a>
			</div>
		</div><!-- /.col -->
	</div><!-- /.row -->
</div><!-- /.container -->
<div class="container-fluid section-about" id="about">
	<div class="row text-center">
		<div class="col mt-5">
			<h2>{{aboutThisProject}}</h2>
		</div><!-- /.col -->
	</div><!-- /.row text-center -->
	<div class="row pt-5 pb-5">
		<!-- <div class="container">
		<div class="row justify-content-center"> -->
		<div class="col-xl-4 col-lg-6 col-md-12 pl-md-3 pr-md-2 mb-5">
			<h3 class="mb-4 text-center">{{theEuropeanStory}}</h3>
			<div class="embed-responsive embed-responsive-16by9">
				<iframe allowfullscreen class="embed-responsive-item" frameborder="0" src=
				"https://www.youtube-nocookie.com/embed/rmyKwMrk0pA"></iframe>
			</div>
			<div class="mt-3 text-center">
				<i aria-hidden="true" class="fa fa-file-text"></i>
				<a class="text-white" href="https://ec.europa.eu/commission/white-paper-future-europe-reflections-and-scenarios-eu27_en">
					<u>Read the European Story: 60 Years of Shared Progress</u>
				</a>
			</div>


		</div><!-- /.col -->
		<div class="col-xl-4 col-lg-6 col-md-12 pr-lg-0 pl-md-3 pr-md-4 mb-5">
			<h3 class="mb-4 text-center">#FutureOfEurope</h3>
			{{content.about.short}}
			<div class="text-center">
				<a href="form.html"><button class="btn btn-secondary">{{addYourVoice}}</button></a>
			</div><!-- /.text-center -->
		</div>
		<div class="col-xl-4 col-lg-12 pl-md-4 pr-md-5">
			<h3 class="mb-4 text-center">{{content.whitePaper}}</h3>
			{{content.whitePaperText}}
		</div><!-- </div>
		</div> -->
	</div><!-- /.row -->
</div><!-- div.container-fluid.full-height>div.row>div.col -->
<div class="container-fluid bg-purple">
	<div class="row">
		<div class="col text-center mt-5 mb-5">
			<h2 class="text-white" id="your-voices">{{yourVoices}}<br>
				<small>Featured contributions</small>
			</h2>
		</div>
	</div>
</div>


<div class="container-fluid section-showcase-2">
	<div class="row justify-content-center">

	</div><!-- /.row -->
</div><!-- /.container-fluid section-showcase-2 -->

<div class="tile-story-fullscreen">
	<div class="container-fluid">
		<div class="close"><i class="fa fa-window-close" aria-hidden="true"></i></div>
		<div class="row align-items-center" style="height: 100vh">
			<div class="col text-center tile-story-fullscreen-content">
			</div><!-- /.col -->
		</div><!-- /.row -->
	</div><!-- /.container -->
</div>

<!-- jQuery first, then Tether, then Bootstrap JS. -->
<script src="https://code.jquery.com/jquery-3.1.1.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js">
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js">
</script>
<script defer src="//europa.eu/webtools/load.js">
</script> <!-- Social Share Kit JS -->
<script src="js/social-share-kit.js">
</script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js">
</script> -->
<script src="js/jquery.ba-bbq.min.js">
</script>

<script>
$(document).ready(function(){


	$('.geopattern').each(function(){
		var hash = $(this).next().text() + $(this).parent().find('strong').text();
		// hash = hash + Math.random();
		$(this).geopattern(hash);
	});

	// debugger;

	// === social sharing ===

	// Init Social Share Kit
	SocialShareKit.init({
		url: 'http://ec.europa.eu/epsc/future-of-europe',
		twitter: {
			title: '#60words60years - share your #FutureOfEurope vision in 60 words https://pic.twitter.com/8juXkrzA30',
			via: 'ECThinkTank'
		},
		pinterest: {
			image: 'http://ec.europa.eu/assets/epsc/pages/60-years-wip/assets/img/add-your-voice-square.jpg'
		},
		onBeforeOpen: function(targetElement, network, paramsObj){
			console.log(arguments);
		},
		onOpen: function(targetElement, network, url, popupWindow){
			console.log(arguments);
		},
		onClose: function(targetElement, network, url, popupWindow){
			console.log(arguments);
		}
	});

	$(function () {

		// Just to disable href for other example icons
		$('.ssk').on('click', function (e) {
			e.preventDefault();
		});

	});

	// load the Twitter widgets.js file asynchronously
	window.twttr = (function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0],
		t = window.twttr || {};
		if (d.getElementById(id)) return;
		js = d.createElement(s);
		js.id = id;
		js.src = "https://platform.twitter.com/widgets.js";
		fjs.parentNode.insertBefore(js, fjs);

		t._e = [];
		t.ready = function(f) {
			t._e.push(f);
		};

		return t;
	}(document, "script", "twitter-wjs"));

	// // Demo callback
	// function twitterDemoCallback(e) {
	//     $('#twitterEvents').append(e.type + ' ');
	// }

	// Bind to Twitter events
	twttr.ready(function (tw) {
		// tw.events.bind('click', twitterDemoCallback);
		// tw.events.bind('tweet', twitterDemoCallback);
	});

	// === / social sharing ===

	// build language menu
	$.getJSON('lang/languages.json', function(languages) {
		languages = languages.languages;
		var urlParams = getUrlParams();
		for (var i = 0; i < languages.length; i++) {
			var language = languages[i].language;
			var locale = languages[i].locale;
			urlParams.lang = locale;
			// console.log(urlParams);
			$('#language-picker .dropdown-menu')
			.append('<a href="' + window.location.href.split('?')[0]
			+ '?' + $.param(urlParams)
			+ '"><button class="dropdown-item" type="button">'
			+ languages[i].language + '<\/button><\/a>');
		}
	});

	// translate strings
	var lang = getUrlParams('lang');
	translate( lang ? getUrlParams('lang') : 'en_GB' );

	function translate (lang) {
		console.log('setting language to ' + lang);
		$.getJSON('lang/' + lang + '/translations.json', function(translations) {

			(function f(translations, parent) {

				var parent = (parent) ? parent : false;

				for (var exp in translations) {
					if (translations.hasOwnProperty(exp)) {

						if (typeof translations[exp] === 'object') {

							if (!parent) {
								newParent = exp;
							} else {
								newParent = parent + '.' + exp;
							}

							f(translations[exp], newParent);

						} else if (typeof translations[exp] === 'string') {

							var path = (parent) ? parent + '.' : '';

							var needle = new RegExp('{{' + path + exp + '}}', 'g');

							$('body :not(script)').not('iframe').contents().filter(function() {
								return this.nodeType === 3;
							}).replaceWith(function() {
								return this.nodeValue.replace(needle, translations[exp]);
							});

						} else {

							console.error('translation node type mismatch');
							console.log(typeof translations[exp]);

						}
					}
				}

				// reveal translated elements
				$('.translate').css('visibility','visible').hide().fadeIn("fast");

			})(translations);

		});
	}

	// http://stackoverflow.com/questions/19491336/get-url-parameter-jquery-or-how-to-get-query-string-values-in-js
	function getUrlParams(k) {
		var p={};
		location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(s,k,v){p[k]=v})
		return k?p[k]:p;
	}

	var users;

	// load testimonials
	$.getJSON('data/testimonials.json', function(data) {
		users = data.users;
		for (var i = 0; i < users.length; i++) {

			var name = users[i].name;
			var age = users[i].age ? users[i].age : '';
			var nationality = users[i].nationality ? users[i].nationality : '';

			if (age && nationality) {	age = age + ', '; }

			var text = users[i].contribution.text.split(/\s+/).slice(0,5).join(" ") + '…';

			var image = users[i].contribution.image;

			var bgStyle = '';
			if (!image) {
				image = 'dark_geometric.png';
				bgStyle = 'background-size: auto;'
				bgStyle = bgStyle + 'background-repeat: repeat;';
			}

			var readMore = users[i].contribution.video ? '<i class="fa fa-play-circle" aria-hidden="true"></i> Play video' : 'Read more'

			var html =

			'<div data-user-id="' + i + '" class="col-xl-2 col-lg-4 col-md-6 p-0 tile-story-2-container"' +
			'style="background-image: url(\'assets/img/' + image + '\'); ' + bgStyle + ' ">' +
			'<a href="#voice' + i + '">' +
			'<div class="row m-0 tile-story-2 align-items-center">' +
			'<div class="col text-center">' +
			'<h3>' + name + '</h3>' +
			'<p><strong>' + age + nationality + '</strong></p>' +
			'<p class="tile-story-text">' + text +'</p>' +
			'<div class="read-more">' + readMore + '</div>' +
			'</div>' +
			'</div><!-- /.row -->' +
			'</a>' +
			'</div><!-- /.col -->';

			// console.log(html);

			$('.section-showcase-2 > .row').append(html);
		}

		hashControl();

	});

	// fullscreen testimonial

	$(document).on('click', '.tile-story-2-container', function(){
		var userId = $(this).data('user-id');
		fullscreenShow(userId);
	});

	$('.tile-story-fullscreen .close').click(fullscreenHide);

	function fullscreenShow (userId) {

		var user = users[userId];

		var age = user.age ? user.age : '';
		var nationality = user.nationality ? user.nationality : '';
		if (age && nationality) {	age = age + ', '; }

		if (user.contribution.video) {
			var video = '<div class="container"><row><div class="col"><div class="embed-responsive embed-responsive-16by9">' +
			'<iframe allowfullscreen class="embed-responsive-item" frameborder="0" src="' + user.contribution.video + '"></iframe></div></div></div>';
		} else {
			var video = '';
		}

		var html = '<h3>' + user.name + '</h3>' +
		'<p><strong>' + age + nationality + '</strong></p>' +
		'<p class="tile-story-text">' + user.contribution.text +'</p>' +
		video;

		$('.tile-story-fullscreen-content').html(html);
		$('.tile-story-fullscreen').css('background-image', 'url(\'assets/img/' + user.contribution.image + '\')');

		$('.tile-story-fullscreen').data('user-id', userId);

		$('.tile-story-fullscreen').show('');
		$('body').css('overflow', 'hidden');

	}

	function fullscreenHide () {
		$('body').css('overflow', 'visible');
		// history.back(1);
		$('.tile-story-fullscreen').hide('');
		$('.tile-story-fullscreen-content').html('');
		// $('.tile-story-fullscreen .embed-responsive-item').stopVideo();
		$.bbq.pushState( {}, 2 );
	}


	// url hash

	function hashControl () {
		// Bind an event to window.onhashchange that, when the history state changes,
		// gets the url from the hash and displays either our cached content or fetches
		// new content to be displayed.
		$(window).bind( 'hashchange', function() {

			// Get the hash (fragment) as a string, with any leading # removed. Note that
			// in jQuery 1.4, you should use e.fragment instead of $.param.fragment().
			var hash = $.param.fragment();
			console.log('hash: ' + hash);

			if (hash.match("^voice")) {

				var userId = hash.replace('voice', '');
				console.log('userId: ' + userId);

				console.log('current fullscreen id: ' + $('.tile-story-fullscreen').data('user-id') );

				if (userId >= 0 && userId !== $('.tile-story-fullscreen').data('user-id')) {
					if (userId < users.length) {
						console.log('will show ID ' + userId);
						fullscreenShow(userId);
					} else {
						console.log('id too high');
					}
				} else {
					console.log('condition not passed');
				}

			} else {
				fullscreenHide();
			}

		});

		// Since the event is only triggered when the hash changes, we need to trigger
		// the event now, to handle the hash the page may have loaded with.
		$(window).trigger( 'hashchange' );

	}



});





</script>
</body>
</html>
